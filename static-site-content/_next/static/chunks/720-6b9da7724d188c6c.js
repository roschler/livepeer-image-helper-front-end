(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{6647:function(){},2111:function(t,n,r){"use strict";var o,i;function maybeTypeToString(t){if(null===t)return"null";if(void 0===t)return"undefined";if("string"!=typeof t)throw Error("maybeTypeToString can only handle string types.");return t}function getFriendlyChainIdName(t){let n={"0x1":"Ethereum Mainnet","0x3":"Ropsten Testnet","0x4":"Rinkeby Testnet","0x5":"Goerli Testnet","0x2a":"Kovan Testnet","0x5e9":"Iliad","0xaa36a7":"Sepolia Testnet"};if(n[t])return n[t];throw Error("Unknown chain ID: ".concat(t))}r.d(n,{TO:function(){return maybeTypeToString},gd:function(){return o},o:function(){return getFriendlyChainIdName},wm:function(){return i}}),function(t){t.MetamaskNotInstalled="This web app requires MetaMask. Please install it now.",t.MetamaskNotReady="Please log into MetaMask now.",t.UnableToConnectMetamask="Unable to connect to MetaMask.",t.WrongChainId="This web app only runs on chain ID: ",t.UnableToGetPublicAddress="Unable to get the current public address from MetaMask. Error details:\n"}(o||(o={})),function(t){t.EthereumMainnet="0x1",t.RopstenTestnet="0x3",t.RinkebyTestnet="0x4",t.GoerliTestnet="0x5",t.KovanTestnet="0x2a",t.Iliad="0x5e9",t.SepoliaTestnet="0xaa36a7"}(i||(i={}))},7443:function(t,n,r){"use strict";r.d(n,{EA:function(){return UserBlockchainPresence}});let o="0x";function isHexUninitializedValue(t){return t===o}var i,a,s=r(2111),l=r(1186),c=r(6760),d=r(5008),u=r(6784),h=r(9730),f=r(457),p=r(5566);let g=null!==(i=p.env.RPC_PROVIDER_URL)&&void 0!==i?i:"https://testnet.storyrpc.io",m=p.env.CURRENCY_ADDRESS||"0x91f6F05B08c16769d3c85867548615d270C42fC7",x=!0;!function(t){t.NON_COMMERCIAL_SOCIAL_REMIXING="Non-Commercial Social Remixing",t.COMMERCIAL_USE="Commercial Use",t.COMMERCIAL_REMIX="Commercial Remix"}(a||(a={}));let w=(0,l.a)({id:1513,name:"Iliad",network:"iliad",nativeCurrency:{decimals:18,name:"IP",symbol:"IP"},rpcUrls:{default:{http:["https://1513.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Storyscan Explorer",url:"https://testnet.storyscan.xyz"}}});function serializeWithBigInt(t){try{let n=JSON.stringify(t,(t,n)=>"bigint"==typeof n?n.toString():n);if(void 0!==n)return n;return""}catch(t){return""}}function deserializeWithBigInt(t){try{return JSON.parse(t,(t,n)=>"string"==typeof n&&/^\d+n?$/.test(n)?BigInt(n.replace("n","")):n)}catch(t){return null}}let UserBlockchainPresence=class UserBlockchainPresence{isSpgNftCollectionInitialized(){return!isHexUninitializedValue(this.spgNftCollectionDetails.contract_address)}addNftDetailsIntoSpgCollection(t){this.listOfNftObjs[t.ipId]=t,this.aryOfNftObjectsInterface.push(t)}isMetamaskInstalled(){var t;let n=void 0!==window.ethereum&&(null===(t=window.ethereum)||void 0===t?void 0:t.isMetaMask)===!0;return x&&console.log("isMetamaskInstalled: ".concat(n)),n}isMetamaskReady(){let t=this.isMetamaskInstalled();return x&&console.log("isMetamaskReady: ".concat(t)),t}async isMetamaskConnected(){if(!this.isMetamaskInstalled())return x&&console.log("isMetamaskConnected: MetaMask is not installed."),!1;try{var t;let n=await (null===(t=window.ethereum)||void 0===t?void 0:t.request({method:"eth_accounts"})),r=n&&n.length>0;return x&&console.log("isMetamaskConnected: ".concat(r)),r}catch(t){if(x){let n=t instanceof Error?t.message:String(t);console.log("isMetamaskConnected error: ".concat(n))}return!1}}async connectToMetamask(){let t=await this.isMetamaskConnected();if(t)return x&&console.log("connectToMetamask: Already connected to MetaMask."),!0;try{var n;let t=await (null===(n=window.ethereum)||void 0===n?void 0:n.request({method:"eth_requestAccounts"}));if(t&&t.length>0)return x&&console.log("connectToMetamask: Successfully connected to MetaMask."),!0;return x&&console.log("connectToMetamask: No accounts returned."),!1}catch(t){if(x){let n=t instanceof Error?t.message:String(t);console.log("connectToMetamask error: ".concat(n))}return!1}}async getCurrentChainId(){try{var t;let n=await (null===(t=window.ethereum)||void 0===t?void 0:t.request({method:"eth_chainId"}));if(x&&console.log("getCurrentChainId: ".concat(n," (").concat((0,s.o)((0,s.TO)(n)),")")),null==n)throw Error("The chain ID is unassigned.");if("0x5e9"===n)return"iliad";throw Error("The following chain ID value is invalid: ".concat(n))}catch(t){if(x){let n=t instanceof Error?t.message:String(t);console.log("getCurrentChainId error: ".concat(n))}throw Error("Failed to get current chain ID: ".concat(t instanceof Error?t.message:String(t)))}}async _getStoryConfig(){if(!window.ethereum)throw Error("Unable to find an Ethereum provider.");window.ethereum;let t={chainId:await this.getCurrentChainId(),transport:(0,c.d)(g),wallet:this.walletClient};return t}async createSpgNftCollection(t,n){try{if(t.length<1)throw Error("The collection name is empty.");if(n.length<1)throw Error("The collection symbol is empty.");let r=await this.preflightCheck();if(!r)return console.error("MetaMask is not ready for transactions."),!1;let o=await this._getStoryConfig(),i=f.QK.newClient(o),a={name:t,symbol:n,txOptions:{waitForTransaction:!0},owner:this.publicAddress},s=await i.nftClient.createNFTCollection(a);if(console.log("New SPG NFT collection created at transaction hash ".concat(s.txHash),"NFT contract address: ".concat(s.nftContract)),void 0===s.nftContract)throw Error("The SPG NFT collection contract is invalid.");if(void 0===s.txHash)throw Error("The transaction hash for the SPG NFT collection contract.");return this.spgNftCollectionDetails={name:t,symbol:n,contract_address:s.nftContract,tx_hash:s.txHash},!0}catch(t){return console.error("Failed to create NFT collection:",t),!1}}async mintAndRegisterNft(t,n){let r=await this.preflightCheck();if(!r)throw Error("MetaMask is not ready for transactions.");let o=await this._getStoryConfig(),i=f.QK.newClient(o),a="https://ipfs.io/ipfs/".concat(t.ipMetadata.ipMetadataURI),s="https://ipfs.io/ipfs/".concat(t.ipMetadata.nftMetadataURI),l="0x".concat(t.ipMetadata.ipMetadataHash),c="0x".concat(t.ipMetadata.nftMetadataHash),d={nftContract:this.spgNftCollectionDetails.contract_address,pilType:f.DJ.NON_COMMERCIAL_REMIX,ipMetadata:{ipMetadataURI:a,ipMetadataHash:l,nftMetadataURI:s,nftMetadataHash:c},recipient:this.publicAddress,txOptions:{waitForTransaction:!0}};function ethToGwei(t){let n=1e9,r=t*n;return Math.trunc(r)}let u=ethToGwei(n.defaultMintingFee);if(n.best_license_guess===String("Non-Commercial Social Remixing"))d.pilType=f.DJ.NON_COMMERCIAL_REMIX;else if(n.best_license_guess===String("Commercial Use"))d.pilType=f.DJ.COMMERCIAL_USE,d.mintingFee=u,d.currency=m;else if(n.best_license_guess===String("Commercial Remix"))d.pilType=f.DJ.COMMERCIAL_REMIX,d.mintingFee=u,d.commercialRevShare=n.commercialRevShare,d.currency=m;else throw Error("Don't know how to handle selected license type of: ".concat(n.best_license_guess));let h=await i.ipAsset.mintAndRegisterIpAssetWithPilTerms(d);if(void 0===h.ipId||isHexUninitializedValue(h.ipId))throw Error("Invalid ID for the mint and register operation.");console.log("Root IPA created at transaction hash ".concat(h.txHash,", IPA ID: ").concat(h.ipId)),console.log("View on the explorer: https://explorer.story.foundation/ipa/".concat(h.ipId));let p={ipId:h.ipId,mintNftRequestDetails:d,mintNftResponseDetails:h};return p}async getCurrentPublicAddress(){try{var t;let n=await (null===(t=window.ethereum)||void 0===t?void 0:t.request({method:"eth_accounts"}));if(n&&n.length>0){let t=n[0];if(x&&console.log("getCurrentPublicAddress: ".concat(t)),"string"!=typeof t)throw Error("The address returned is not a string.");if(!(0,d.v)(t))throw Error("The address received from Metamask is not a string.");return t}throw Error("No accounts available.")}catch(t){if(x){let n=t instanceof Error?t.message:String(t);console.log("getCurrentPublicAddress error: ".concat(n))}throw Error("Failed to get current public address: ".concat(t instanceof Error?t.message:String(t)))}}async switchToChainId(t){if(!t)throw Error("chainId cannot be empty.");try{let n=(0,s.o)(t);x&&console.log("Attempting to switch to chain ID: ".concat(t," (").concat(n,")"))}catch(n){if(x){let t=n instanceof Error?n.message:String(n);console.log("switchToChainId error: ".concat(t))}throw Error("Invalid chain ID: ".concat(t))}try{var n;return await (null===(n=window.ethereum)||void 0===n?void 0:n.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]})),this.chainId=t,x&&console.log("Switched to chain ID: ".concat(t," (").concat((0,s.o)(t),")")),!0}catch(t){if(x){let n=t instanceof Error?t.message:String(t);console.log("switchToChainId error: ".concat(n))}return!1}}defaultDoNotifyUser(t){if(!t||""===t.trim()){console.error("doNotifyUser: msgToUser cannot be empty.");return}console.log("User notification: ".concat(t))}async preflightCheck(){let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultDoNotifyUser.bind(this),r=n;if(!this.isMetamaskInstalled())return r(s.gd.MetamaskNotInstalled),!1;if(!this.isMetamaskReady())return r(s.gd.MetamaskNotReady),!1;let o=await this.isMetamaskConnected();if(!o){let t=await this.connectToMetamask();if(!t)return r(s.gd.UnableToConnectMetamask),!1}try{let n=await this.getCurrentChainId();if("string"!=typeof n)throw Error("Unable to get the current chain ID.");t=n}catch(n){let t=n instanceof Error?n.message:String(n);return r("Failed to get current chain ID: ".concat(t)),!1}if(this.enforceChainId){if(t!==this.enforceChainId)try{let t=await this.switchToChainId(this.enforceChainId);if(!t){let t=(0,s.o)(this.enforceChainId);return r(s.gd.WrongChainId+"".concat(t,".")),!1}}catch(o){let t=(0,s.o)(this.enforceChainId),n=o instanceof Error?o.message:String(o);return r(s.gd.WrongChainId+"".concat(t,". Error details:\n").concat(n)),!1}else this.chainId=t}else this.chainId=t;try{let t=window.ethereum;t?(this.walletClient=(0,u.K)({chain:w,transport:(0,h.P)(t)}),this.publicAddress=await this.getCurrentPublicAddress(),this.walletClient.account=this.publicAddress):console.error("MetaMask is not installed or provider is unavailable.")}catch(n){let t=n instanceof Error?n.message:String(n);return r(s.gd.UnableToGetPublicAddress+t),!1}return x&&console.log("preflightCheck: Successful."),!0}getNftByIndex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(t<-1||t>=this.aryOfNftObjectsInterface.length)throw Error("Invalid NFT objects array index.");return -1!==t?this.aryOfNftObjectsInterface[t]:this.aryOfNftObjectsInterface.length<1?null:this.aryOfNftObjectsInterface[this.aryOfNftObjectsInterface.length-1]}getNftExplorerPageUrl(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=this.getNftByIndex(t);if(!n)throw Error("Invalid NFT index of the NFT array is empty.");let r=n,o=r.mintNftResponseDetails.ipId,i="https://explorer.story.foundation/ipa/".concat(o);return i}toJsonString(){return serializeWithBigInt(this)}static fromJsonObject(t){var n;return new UserBlockchainPresence(null!==(n=t.enforceChainId)&&void 0!==n?n:"")}static fromJsonString(t){if(t.length<1)throw Error("The JSON string is empty.");let n=deserializeWithBigInt(t);if(null===n)throw Error("Failed to deserialize JSON string.");return reconstituteUserBlockchainPresence(n)}constructor(t){if(this.publicAddress=o,this.walletClient=null,this.chainId="",this.spgNftCollectionDetails={name:"",symbol:"",contract_address:o,tx_hash:o},this.listOfNftObjs={},this.aryOfNftObjectsInterface=[],null!==t&&t.length<1)throw Error("The enforceChainId parameter is not NULL, so it can not be empty.");this.enforceChainId=t}};function reconstituteUserBlockchainPresence(t){if("object"!=typeof t||null===t)throw Error("Invalid JSON structure for UserBlockchainPresence.");let n=UserBlockchainPresence.fromJsonObject(t),r=n;return Object.keys(t).forEach(n=>{r[n]=t[n]}),n}},7229:function(t,n,r){"use strict";var o=r(7437),i=r(2265),a=r(6103);let s=(0,i.forwardRef)((t,n)=>{let[r,s]=(0,i.useState)(!1),[l,c]=(0,i.useState)(""),[d,u]=(0,i.useState)(""),[h,f]=(0,i.useState)(""),p=(0,i.useRef)(null),g=(0,i.useRef)(null);(0,i.useImperativeHandle)(n,()=>({setVisibility(t){s(t)},setText(t){c(t)},setTextExplainer(t){u(t)},handleStoryProtocolClick(){alert("Mint it!")}})),(0,i.useEffect)(()=>{c("")},[t.titleText]);let handleTextareaChange=t=>{c(t.target.value)},handleTextareaKeyDown=t=>{"Enter"!==t.key||t.shiftKey||t.preventDefault()},handleInputChange=t=>{f(t.target.value)},handleInputKeyDown=n=>{"Enter"!==n.key||n.shiftKey||(n.preventDefault(),t.onTakeAction&&t.onTakeAction(h),f(""))},handleGoClick=()=>{t.onTakeAction&&t.onTakeAction(h),f("")};return(0,o.jsxs)("div",{id:"chatbot-interaction-container-div",className:"chatbot-interaction-container ".concat(r?"":"hidden"),style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:r?"flex":"none",flexDirection:"column",backgroundColor:"white",padding:"20px",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.1)",zIndex:1e3,width:"80%",maxWidth:"500px",height:"auto",color:"rgb(87 52 52)"},children:[(0,o.jsx)("div",{id:"title-div",children:(0,o.jsxs)("div",{id:"child-of-title-div",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,o.jsx)("h3",{className:"chatbot-floating-interaction-header",children:t.titleText}),(0,o.jsx)(a.zx,{style:{marginLeft:"3px"},onClick:t.handleStoryProtocolClick,children:(0,o.jsx)("img",{src:"/nft-supreme/story-protocol-button-1.png",alt:"Share on Twitter"})})]})}),(0,o.jsx)("div",{id:"state-text-chatbot-interaction-floating",className:"w-[500px] mx-auto text-center px-12 text-justify font-medium animate-pulse-brightness",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"#ffcccc"},children:t.stateText}),(0,o.jsx)("div",{className:"grid items-center justify-center ".concat(t.isStreaming?"opacity-90":"opacity-0"),children:(0,o.jsx)(a.$j,{size:"3",className:"mt-3"})}),(0,o.jsx)("textarea",{readOnly:!0,id:"chatbot-explainer-textarea",ref:g,value:d}),(0,o.jsx)("textarea",{id:"chatbot-interaction-textarea",ref:p,value:l,onChange:handleTextareaChange,onKeyDown:handleTextareaKeyDown}),(0,o.jsxs)("div",{id:"prompt-input-box-div",className:"prompt-input-box",children:[(0,o.jsx)("label",{id:"prompt-input-box-label",className:"prompt-input-box-label",children:"Your input:"}),(0,o.jsx)("textarea",{id:"chatbot-interaction-input-box",value:h,onChange:handleInputChange,onKeyDown:handleInputKeyDown,className:"prompt-input-box-textarea"}),(0,o.jsx)("button",{id:"prompt-input-box-button",className:"rt-reset rt-BaseButton rt-r-size-2 rt-variant-solid rt-Button",onClick:handleGoClick,children:"Go"})]})]})});s.displayName="ChatbotInteractionFloating",n.Z=s},5487:function(t,n,r){"use strict";r.d(n,{Z:function(){return ImageViewer}});var o=r(7437),i=r(2265),a=r(9370),s=r(3067),l=r(8291),c=r(7042),d=r(4769);function cn(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0,d.m6)((0,c.W)(n))}var u=r(7256),h=r(9213);let f=(0,h.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=i.forwardRef((t,n)=>{let{className:r,variant:i,size:a,asChild:s=!1,...l}=t,c=s?u.g7:"button";return(0,o.jsx)(c,{className:cn(f({variant:i,size:a,className:r})),ref:n,...l})});p.displayName="Button";let g=i.createContext(null);function useCarousel(){let t=i.useContext(g);if(!t)throw Error("useCarousel must be used within a <Carousel />");return t}let m=i.forwardRef((t,n)=>{let{orientation:r="horizontal",opts:s,setApi:l,plugins:c,className:d,children:u,...h}=t,[f,p]=(0,a.Z)({...s,axis:"horizontal"===r?"x":"y"},c),[m,x]=i.useState(!1),[w,y]=i.useState(!1),b=i.useCallback(t=>{t&&(x(t.canScrollPrev()),y(t.canScrollNext()))},[]),v=i.useCallback(()=>{null==p||p.scrollPrev()},[p]),C=i.useCallback(()=>{null==p||p.scrollNext()},[p]),k=i.useCallback(t=>{"ArrowLeft"===t.key?(t.preventDefault(),v()):"ArrowRight"===t.key&&(t.preventDefault(),C())},[v,C]);return i.useEffect(()=>{p&&l&&l(p)},[p,l]),i.useEffect(()=>{if(p)return b(p),p.on("reInit",b),p.on("select",b),()=>{null==p||p.off("select",b)}},[p,b]),(0,o.jsx)(g.Provider,{value:{carouselRef:f,api:p,opts:s,orientation:r||((null==s?void 0:s.axis)==="y"?"vertical":"horizontal"),scrollPrev:v,scrollNext:C,canScrollPrev:m,canScrollNext:w},children:(0,o.jsx)("div",{ref:n,onKeyDownCapture:k,className:cn("relative",d),role:"region","aria-roledescription":"carousel",...h,children:u})})});m.displayName="Carousel";let x=i.forwardRef((t,n)=>{let{className:r,...i}=t,{carouselRef:a,orientation:s}=useCarousel();return(0,o.jsx)("div",{ref:a,className:"overflow-hidden",children:(0,o.jsx)("div",{ref:n,className:cn("flex","horizontal"===s?"-ml-4":"-mt-4 flex-col",r),...i})})});x.displayName="CarouselContent";let w=i.forwardRef((t,n)=>{let{className:r,...i}=t,{orientation:a}=useCarousel();return(0,o.jsx)("div",{ref:n,role:"group","aria-roledescription":"slide",className:cn("min-w-0 shrink-0 grow-0 basis-full","horizontal"===a?"pl-4":"pt-4",r),...i})});w.displayName="CarouselItem";let y=i.forwardRef((t,n)=>{let{className:r,variant:i="outline",size:a="icon",...l}=t,{orientation:c,scrollPrev:d,canScrollPrev:u}=useCarousel();return(0,o.jsxs)(p,{ref:n,variant:i,size:a,className:cn("absolute  h-8 w-8 rounded-full","horizontal"===c?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",r),disabled:!u,onClick:d,...l,children:[(0,o.jsx)(s.Z,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});y.displayName="CarouselPrevious";let b=i.forwardRef((t,n)=>{let{className:r,variant:i="outline",size:a="icon",...s}=t,{orientation:c,scrollNext:d,canScrollNext:u}=useCarousel();return(0,o.jsxs)(p,{ref:n,variant:i,size:a,className:cn("absolute h-8 w-8 rounded-full","horizontal"===c?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",r),disabled:!u,onClick:d,...s,children:[(0,o.jsx)(l.Z,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Next slide"})]})});b.displayName="CarouselNext";let v=i.forwardRef((t,n)=>{let{className:r,...i}=t;return(0,o.jsx)("div",{ref:n,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",r),...i})});v.displayName="Card";let C=i.forwardRef((t,n)=>{let{className:r,...i}=t;return(0,o.jsx)("div",{ref:n,className:cn("flex flex-col space-y-1.5 p-6",r),...i})});C.displayName="CardHeader";let k=i.forwardRef((t,n)=>{let{className:r,...i}=t;return(0,o.jsx)("h3",{ref:n,className:cn("text-2xl font-semibold leading-none tracking-tight",r),...i})});k.displayName="CardTitle";let N=i.forwardRef((t,n)=>{let{className:r,...i}=t;return(0,o.jsx)("p",{ref:n,className:cn("text-sm text-muted-foreground",r),...i})});N.displayName="CardDescription";let T=i.forwardRef((t,n)=>{let{className:r,...i}=t;return(0,o.jsx)("div",{ref:n,className:cn("p-6 pt-0",r),...i})});T.displayName="CardContent";let I=i.forwardRef((t,n)=>{let{className:r,...i}=t;return(0,o.jsx)("div",{ref:n,className:cn("flex items-center p-6 pt-0",r),...i})});I.displayName="CardFooter";let ImageCarousel=t=>{let{imageUrls:n,onActiveImageChange:r}=t,[a,s]=(0,i.useState)(null),l=(0,i.useRef)(null),handleSetApi=t=>{s(null!=t?t:null)},handleSelect=()=>{if(!a||0===n.length)return;let t=null==a?void 0:a.selectedScrollSnap();if(r&&n[t]){var o,i,s,c;let a=n[t],d=null!==(s=null===(o=l.current)||void 0===o?void 0:o.naturalWidth)&&void 0!==s?s:0,u=null!==(c=null===(i=l.current)||void 0===i?void 0:i.naturalHeight)&&void 0!==c?c:0;r(a,{width:d,height:u})}};(0,i.useEffect)(()=>{if(a)return null==a||a.on("select",handleSelect),handleSelect(),()=>{null==a||a.off("select",handleSelect)}},[a,n,r]);let handleImageLoad=()=>{handleSelect()};return(0,i.useEffect)(()=>{handleSelect()},[n]),(0,o.jsxs)(m,{setApi:handleSetApi,className:"w-full max-w-xs",children:[(0,o.jsx)(x,{children:n.map((t,n)=>(0,o.jsx)(w,{children:(0,o.jsx)("div",{children:(0,o.jsx)(v,{className:"rounded-none",children:(0,o.jsx)(T,{className:"flex aspect-square items-center justify-center p-0",children:(0,o.jsx)("img",{ref:l,src:t,alt:"Image ".concat(n),width:500,height:500,onLoad:handleImageLoad})})})})},n))}),(0,o.jsx)(y,{}),(0,o.jsx)(b,{})]})};function ImageViewer(t){return(0,o.jsx)(ImageCarousel,{imageUrls:t.imageUrls,onActiveImageChange:t.onActiveImageChange})}},7876:function(t,n,r){"use strict";r.d(n,{Z:function(){return PromptLabel}});var o=r(7437),i=r(6743),a=r(2265);function PromptLabel(t){let n=(0,a.useRef)(null),changeHandler=r=>{t.onChange(r.target.value),n.current&&(n.current.style.height="auto",n.current.style.height="".concat(n.current.scrollHeight,"px"))};(0,a.useEffect)(()=>{n.current&&(n.current.style.height="auto",n.current.style.height="".concat(n.current.scrollHeight,"px"))},[]);let handleFocus=()=>{n.current&&n.current.select()},handleKeyDown=n=>{"Enter"===n.key&&(n.preventDefault(),t.onTakeAction(t.value))};return(0,o.jsxs)("div",{className:"m-6 flex flex-wrap items-center gap-[15px] px-6",children:[(0,o.jsx)(i.f,{className:"leading-1 text-sm font-bold",htmlFor:"promptInput",children:"Prompt >"}),(0,o.jsx)("textarea",{ref:n,className:"selection:color-white inline-flex w-[420px] appearance-none items-center justify-center rounded-[4px] bg-blackA2 px-[10px] text-[15px] leading-none text-white shadow-[0_0_0_1px] shadow-blackA6 outline-none selection:bg-blackA6 focus:shadow-[0_0_0_2px_black]",id:"prompt-input-textarea-license-assistant",onChange:changeHandler,onFocus:handleFocus,onKeyDown:handleKeyDown,value:t.value,rows:2,style:{overflow:"hidden",resize:"none",minHeight:"50px"}})]})}},2167:function(t,n,r){"use strict";r.d(n,{Z:function(){return y}});var o=r(7437),i=r(2265),a=r(3022),s=r(6103),l=r(4227),c=r(8505),d=r(8682),u=r(7810),h=r(5442),f=r(8681),p=r(8837),g=r(4907),m=r(3864);let x=m.k;function StoryGenreButton(t){let{id:n}=t;return(0,o.jsxs)(a.HP,{className:" inline-flex h-[32px] flex-shrink-0 flex-grow-0 basis-auto items-center justify-center rounded bg-white px-[5px] text-[13px] leading-none text-mauve11 outline-none first:ml-0 hover:bg-violet3 hover:text-violet11 focus:relative focus:shadow-[0_0_0_2px] focus:shadow-violet7 data-[state=on]:bg-violet5 data-[state=on]:text-violet11",value:n,"aria-label":x[n],...t,children:["magic"===n&&(0,o.jsx)(l.Z,{}),"scifi"===n&&(0,o.jsx)(c.Z,{}),"swords"===n&&(0,o.jsx)(d.Z,{}),"romance"===n&&(0,o.jsx)(u.Z,{}),"drama"===n&&(0,o.jsx)(h.Z,{}),"apocalypse"===n&&(0,o.jsx)(f.Z,{}),"hollywood"===n&&(0,o.jsx)(p.Z,{}),"singularity"===n&&(0,o.jsx)(g.Z,{})]})}let w=(0,i.forwardRef)((t,n)=>{let[r,l]=(0,i.useState)("magic"),[c,d]=(0,i.useState)(!0),changeHandler=n=>{l(n.currentTarget.id),t.onGenreChange(n.currentTarget.id)},selectHandler=()=>{t.onGenreSelect(r)},handleTwitterShare=()=>{try{t.doShareImageOnTwitter()}catch(t){t instanceof Error?console.error(t.message):console.error("An unknown error occurred.")}},handleStoryProtocolClick=()=>{try{t.doMintTokenOnStoryProtocol()}catch(t){t instanceof Error?console.error(t.message):console.error("An unknown error occurred.")}};return(0,i.useImperativeHandle)(n,()=>({setTwitterButtonEnabled(t){d(t)}})),(0,o.jsxs)(a.fC,{className:"mt-4 flex min-w-max rounded-md bg-white p-[10px] shadow-[0_2px_10px] shadow-blackA4","aria-label":"Formatting options",children:[(0,o.jsx)(a.tX,{type:"single",defaultValue:"magic","aria-label":"Story Genre Selector",className:"flex gap-0 sm:gap-2 lg:gap-3",children:Object.keys(m.k).map(n=>(0,o.jsx)(StoryGenreButton,{disabled:t.disabled,onClick:changeHandler,id:n},n))}),(0,o.jsx)(a.Z0,{className:"mx-[10px] w-[1px] bg-mauve6"}),(0,o.jsx)(a.rU,{className:"ml-0.5 mr-3 mt-0.5 hidden h-[32px] w-[120px] flex-shrink-0 flex-grow-0 basis-auto items-center justify-center rounded bg-transparent bg-white px-[5px] text-[13px] leading-none text-mauve11 outline-none first:ml-0 hover:cursor-pointer hover:bg-transparent hover:text-violet11 focus:relative focus:shadow-[0_0_0_2px] focus:shadow-violet7 data-[state=on]:bg-violet5 data-[state=on]:text-violet11 sm:inline-flex",href:"#",children:m.k[r]}),(0,o.jsx)(a.Z0,{className:"mx-[10px] hidden w-[1px] bg-mauve6 sm:inline-flex"}),(0,o.jsx)(s.zx,{style:{marginRight:"3px"},onClick:handleTwitterShare,disabled:!c,children:(0,o.jsx)("img",{src:"/nft-supreme/twitter-button-1.jpg",alt:"Share on Twitter"})}),(0,o.jsx)(s.zx,{style:{marginRight:"3px"},onClick:handleStoryProtocolClick,disabled:!c,children:(0,o.jsx)("img",{src:"/nft-supreme/story-protocol-button-1.png",alt:"Share on Twitter"})}),(0,o.jsx)(s.zx,{style:{marginLeft:"3px"},onClick:selectHandler,children:"Make Image"})]})});w.displayName="ReaderToolbar";var y=w},755:function(t,n,r){"use strict";function getCookie(t){var n;let r="; ".concat(document.cookie),o=r.split("; ".concat(t,"="));if(2===o.length)return null===(n=o.pop())||void 0===n?void 0:n.split(";").shift()}function setCookie(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3650,o=new Date;o.setTime(o.getTime()+864e5*r);let i="expires=".concat(o.toUTCString(),";");document.cookie="".concat(t,"=").concat(n,";").concat(i,"path=/")}function getOrCreateAnonymousId(){let t="anonymousUserId",n=getCookie(t);return n||setCookie(t,n=crypto.randomUUID(),365),n}r.d(n,{E:function(){return getOrCreateAnonymousId}})},3864:function(t,n,r){"use strict";r.d(n,{k:function(){return o}});let o={magic:"Magical Wizardry",scifi:"Science Fiction",swords:"Sword & Sorcery",romance:"Romance Novel",drama:"Classic Drama",apocalypse:"Apocalypse Now",hollywood:"Hollywood Action",singularity:"The Singularity"}},5493:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return ReaderViewport}});var EnumChatbotNames,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7437),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2265),react_use_websocket__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7884),_app_reader_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3864),_app_components_toolbar_toolbar__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2167),_app_components_prompt_input__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7876),_app_components_image_viewer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5487),_radix_ui_themes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6103),_barrel_optimize_names_Frown_lucide_react__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(8150),_app_cookies_cookie_management__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(755),_client_constants_client_user_messages__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5007),_app_components_blockchain_user_blockchain_presence__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(7443),_app_components_blockchain_blockchain_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2111),_common_common_routines__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(5196),_app_components_chatbot_interaction_floating__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(7229);!function(t){t.LICENSE_ASSISTANT="license_assistant",t.IMAGE_ASSISTANT="image_assistant"}(EnumChatbotNames||(EnumChatbotNames={}));let CONSOLE_CATEGORY="viewport",defaultPrompts={magic:"A photorealistic wizard who lives in a magical forest.",scifi:"In a galaxy far, far away, Luke swings a light saber.",swords:"A regal knight on a quest to save the kingdom.",romance:"A sly fox falls in love with a mysterious feline.",drama:"In a small town, a detective uncovers a dark secret.",apocalypse:"The world has ended, smoke spews from volcanoes everywhere.",hollywood:"A dazzling showgirl dances in a chorus line.",singularity:"The Borg has risen and stand ready to take over the world"},defaultImages={urls:[]},genreList=_app_reader_types__WEBPACK_IMPORTED_MODULE_3__.k;function ReaderViewport(props){var _props_session_user,_props_session,_props_session_user_name;let mintNftImageDetailsResolver=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),requestGetUserBlockchainPresenceObjectResolver=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),requestStoreUserBlockchainPresenceObjectResolver=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),user=null!==(_props_session_user_name=null===(_props_session=props.session)||void 0===_props_session?void 0:null===(_props_session_user=_props_session.user)||void 0===_props_session_user?void 0:_props_session_user.name)&&void 0!==_props_session_user_name?_props_session_user_name:"Anonymous",defaultPrompt="New image.  A strange looking tree, craggy, with scary branches, and eerie shadowy mist swirling around it, in the moonlit sky.",[story,setStory]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("What kind of image would you like to create?"),[genre,setGenre]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("magic"),[images,setImages]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(defaultImages),[prompt,setPrompt]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(defaultPrompt),[isStreaming,setIsStreaming]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[userHasTyped,setUserHasTyped]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[errorMessage,setErrorMessage]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[showCarousel,setShowCarousel]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[connectionEstablished,setConnectionEstablished]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[stateText,setStateText]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[connectionAttempt,setConnectionAttempt]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),imageCarouselRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),[licenseResponseObj,setLicenseResponseObj]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[chatbotName,setChatbotName]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("image_assistant"),cbLicenseAssistantRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),cbImageAssistantRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),bIsNewLicenseSession=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!0),setLicenseAssistantVisibility=t=>{cbLicenseAssistantRef.current&&cbLicenseAssistantRef.current.setVisibility(t)},setImageAssistantVisibility=t=>{cbImageAssistantRef.current&&cbImageAssistantRef.current.setVisibility(t)},setLicenseAssistantText=t=>{cbLicenseAssistantRef.current&&cbLicenseAssistantRef.current.setText(t)},setLicenseAssistantExplainerText=t=>{cbLicenseAssistantRef.current&&cbLicenseAssistantRef.current.setTextExplainer(t)};(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{"license_assistant"===chatbotName?setLicenseAssistantVisibility(!0):setLicenseAssistantVisibility(!1)},[chatbotName]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{"license_assistant"===chatbotName?setLicenseAssistantVisibility(!0):setLicenseAssistantVisibility(!1)},[chatbotName]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{setLicenseAssistantText("With a Story Protocol license, you have flexibility in how the IP asset can be used, sold, and adapted by others. You can set terms to allow the transfer your license, you can set the fee for licensing your work, or establish an expiration date for the license. You can allow or disallow your work to be used commercially (for profit) and require them to attribute you in their derivative works. An SP license is very powerful and there several other options I have not mentioned. Do you know what kind of license you want to offer?"),setLicenseAssistantExplainerText("Your license terms will appear here...")},[]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{cbLicenseAssistantRef.current,cbImageAssistantRef.current},[]);let WEBSOCK_URL="wss://wss.plasticeducator.com/chatbot",activeImageUrl="",activeImageDimensions={width:0,height:0};{let strToEval="window.location.hostname === 'localhost'",isLocalhostURL=eval(strToEval);isLocalhostURL&&(WEBSOCK_URL="ws://localhost:3001/chatbot")}let toolbarRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{toolbarRef.current&&(activeImageUrl.length>0?toolbarRef.current.setTwitterButtonEnabled(!1):toolbarRef.current.setTwitterButtonEnabled(!0))},[images]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{connectionEstablished?setErrorMessage(""):console.log("Connection lost!")},[connectionEstablished]);let shouldReconnect=t=>connectionAttempt<5?(setConnectionAttempt(t=>t+1),!0):(console.error("Max reconnection attempts reached"),!1),onLicenseAssistantPromptChanged=t=>{setUserHasTyped(!0),setPrompt(t)},onLicenseAssistantTakeAction=t=>{if(console.info(CONSOLE_CATEGORY,"The license assistant take action value is: ".concat(t,".")),isStreaming)return;setStory("");let n=(0,_app_cookies_cookie_management__WEBPACK_IMPORTED_MODULE_12__.E)();sendJsonMessage({type:"request_license_assistant",payload:{user_id:n,prompt:t,is_new_license_session:bIsNewLicenseSession.current}}),bIsNewLicenseSession.current=!1},{sendJsonMessage,lastMessage,readyState}=(0,react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.ZP)(WEBSOCK_URL,{onOpen:()=>{console.log("Connection opened"),setConnectionAttempt(0),setConnectionEstablished(!0)},onClose:t=>{console.log("Connection closed"),console.log("Code: ".concat(t.code,", Reason: ").concat(t.reason,", Clean: ").concat(t.wasClean)),setConnectionEstablished(!1),setIsStreaming(!1),setErrorMessage("Disconnected: ".concat(t.reason))},onError:t=>{console.error("WebSocket error",t),setErrorMessage("WebSocket error occurred")},shouldReconnect}),sendUserBlockchainPresenceMessage=t=>{if(t.publicAddress.length<1)throw Error("The public address field is empty");(0,_common_common_routines__WEBPACK_IMPORTED_MODULE_13__.q)(t);let n={user_blockchain_presence_stringified:t.toJsonString()};sendJsonMessage({type:"request_store_user_blockchain_presence",payload:n})},connectionStatus={[react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.kQ.CONNECTING]:"connecting...",[react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.kQ.OPEN]:"connected",[react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.kQ.CLOSING]:"closing",[react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.kQ.CLOSED]:"closed",[react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.kQ.UNINSTANTIATED]:"uninitialized..."}[readyState],clearError=()=>{setTimeout(()=>{setErrorMessage("")},5e3)},onGenreChange=t=>{setGenre(t),userHasTyped||setPrompt(defaultPrompts[t].replace("%user%",user))},onGenreSelect=t=>{if(isStreaming)return;setStory(""),setShowCarousel(!1),setIsStreaming(!0);let n=(0,_app_cookies_cookie_management__WEBPACK_IMPORTED_MODULE_12__.E)();sendJsonMessage({type:"request_image_assistant",payload:{user_id:n,prompt}})},doMakeImage=t=>{if(isStreaming)return;setPrompt(t),setStory(""),setIsStreaming(!0);let n=(0,_app_cookies_cookie_management__WEBPACK_IMPORTED_MODULE_12__.E)();sendJsonMessage({type:"request_image_assistant",payload:{user_id:n,prompt:t}})},requestGetUserBlockchainPresenceObject=async t=>(sendJsonMessage({type:"request_get_user_blockchain_presence",payload:{user_public_address:t}}),new Promise((t,n)=>{requestGetUserBlockchainPresenceObjectResolver.current=t})),requestStoreUserBlockchainPresenceObject=async t=>(sendUserBlockchainPresenceMessage(t),new Promise((t,n)=>{requestStoreUserBlockchainPresenceObjectResolver.current=t})),onPromptUpdate=t=>{setUserHasTyped(!0),setPrompt(t)},badgeColor=()=>readyState===react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.kQ.OPEN?"lime":readyState===react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.kQ.CLOSED?"red":"orange",doShareImageOnTwitter=()=>{if(console.info(CONSOLE_CATEGORY,"Sharing image on Twitter with URL: ".concat(activeImageUrl)),activeImageUrl.length>0){let t=(0,_app_cookies_cookie_management__WEBPACK_IMPORTED_MODULE_12__.E)();sendJsonMessage({type:"share_image_on_twitter",payload:{user_id:t,image_url:activeImageUrl,dimensions:activeImageDimensions,client_user_message:_client_constants_client_user_messages__WEBPACK_IMPORTED_MODULE_8__._.TWITTER_SHARE}})}},requestMintNftTokenDetailsFromServer=t=>{console.info(CONSOLE_CATEGORY,"Requesting image details in preparation for token minting for image: ".concat(activeImageUrl));let n=(0,_app_cookies_cookie_management__WEBPACK_IMPORTED_MODULE_12__.E)(),r={user_id:n,user_blockchain_presence_json_stringified:t.toJsonString(),image_url:activeImageUrl,dimensions:activeImageDimensions,client_user_message:"(none)"};return sendJsonMessage({type:_client_constants_client_user_messages__WEBPACK_IMPORTED_MODULE_8__._.MINT_NFT,payload:r}),new Promise((t,n)=>{mintNftImageDetailsResolver.current=t})},doMintTokenOnStoryProtocol=async()=>{if(console.info(CONSOLE_CATEGORY,"Minting token on Story Protocol network: ".concat(activeImageUrl)),activeImageUrl.length>0){let t;setLicenseAssistantVisibility(!1);let n=new _app_components_blockchain_user_blockchain_presence__WEBPACK_IMPORTED_MODULE_9__.EA(_app_components_blockchain_blockchain_common__WEBPACK_IMPORTED_MODULE_10__.wm.Iliad),r=await n.preflightCheck(setErrorMessage);if(!r)return console.info(CONSOLE_CATEGORY,"Preflight check failed for public address: ".concat(n.publicAddress)),!1;console.info(CONSOLE_CATEGORY,"Preflight check succeeded for public address: ".concat(n.publicAddress));let o=await requestGetUserBlockchainPresenceObject(n.publicAddress);null===o?(t=n,console.info(CONSOLE_CATEGORY,"New user.  Initializing needed user elements.")):(t=o,console.info(CONSOLE_CATEGORY,"Existing user.  Using their existing user blockchain presence object elements."));let i=await requestMintNftTokenDetailsFromServer(t);console.info(CONSOLE_CATEGORY,"Received image details for NFT minting from back-end server.");let a=!t.isSpgNftCollectionInitialized();if(a){setStateText("Creating Story Protocol Gateway collection, a one-time operation."),console.info(CONSOLE_CATEGORY,"Creating SPG NFT collection for current user and public address pair."),setIsStreaming(!0);let n=await t.createSpgNftCollection("Livepeer Image Helper","LIH");if(setIsStreaming(!1),!n)throw Error("The attempt to create an SPG NFT collection failed.");let r=await requestStoreUserBlockchainPresenceObject(t);if(!r)throw Error("The back-end server reported a failure while saving the user's blockchain presence object.");setStateText("Story Protocol Gateway collection successfully created!"),console.info(CONSOLE_CATEGORY,"The creation of a SPG NFT collection for public address(".concat(t.publicAddress,") succeeded and the user's blockchain presence object has been updated with those details."))}else console.info(CONSOLE_CATEGORY,"A SPG NFT collection already exists for the current user/public address pair.");if(setStateText("Minting NFT and registering it on the Story Protocol network."),setIsStreaming(!0),!licenseResponseObj)throw Error("The licenseResponseObj variable is unassigned.");let s=await t.mintAndRegisterNft(i,licenseResponseObj);setStateText("NFT successfully minted!  Opening explorer page in 30 seconds.");let l=_app_components_blockchain_user_blockchain_presence__WEBPACK_IMPORTED_MODULE_9__.EA.fromJsonString(i.user_blockchain_presence_stringified);setIsStreaming(!1),console.log("Adding NFT to user's list of owned NFTs."),l.addNftDetailsIntoSpgCollection(s);let c=l.getNftExplorerPageUrl();setIsStreaming(!0),setTimeout(()=>{setIsStreaming(!1),openExplorerPage(c)},3e3);let d=await requestStoreUserBlockchainPresenceObject(l);if(!d)throw Error("The back-end server reported a failure while saving the user's blockchain presence object after NFT minting succeeded.");console.info(CONSOLE_CATEGORY,"Successfully minted new NFT.")}else console.info(CONSOLE_CATEGORY,"Ignoring request to minting token on Story Protocol network because an image has not been generated yet.")},doLicenseAssistantBeforeMinting=()=>{bIsNewLicenseSession.current=!0,setChatbotName("license_assistant"),setLicenseAssistantVisibility(!0)},doActiveImageChange=(t,n)=>{t.length>0&&(console.info(CONSOLE_CATEGORY,"The active image URL has changed to:\n".concat(t,", width: ").concat(n.width,"px, height: ").concat(n.height,"px")),activeImageUrl=t,activeImageDimensions=n)},buildImageShareForTwitterUrl=function(t){let n;let{tweet_text:r,twitter_card_url:o,hash_tags_array:i}=t;if(!r||0===r.trim().length)throw Error("tweet_text cannot be an empty string.");if(!o||0===o.trim().length)throw Error("twitter_card_url cannot be an empty string.");try{n=new window.URL(o)}catch(t){throw Error("url_to_twitter_card is not a valid URL: ".concat(o))}if("https:"!==n.protocol)throw Error("url_to_twitter_card must use the HTTPS protocol: ".concat(o));encodeURIComponent(r),i.length>0&&encodeURIComponent(i.map(t=>t.trim()).filter(t=>t.length>0).join(","));let a="&url=".concat(encodeURIComponent(o)),s=encodeURIComponent(r),l="https://twitter.com/intent/tweet",c="".concat(l,"?text=").concat(s,"%0A-- Made with @Livepeer Image Helper%0A").concat(a,"%0A");return console.info(CONSOLE_CATEGORY,"Full Twitter share URL built:\n".concat(c)),c},openTwitterShare=t=>{let openInNewTab1=t=>{let n=document.createElement("a");n.href=t,n.target="_blank",n.rel="noopener noreferrer",n.click()};{console.info("Sharing image on Twitter. twitterSharePayload object:"),console.dir(t,{depth:null,colors:!0});let n=buildImageShareForTwitterUrl(t);openInNewTab1(n)}},openExplorerPage=t=>{if(t.length<1)throw Error("The explorerPageUrl parameter is empty.");let openInNewTab1=t=>{let n=document.createElement("a");n.href=t,n.target="_blank",n.rel="noopener noreferrer",n.click()};console.info("Opening NFT explorer page, URL:\n".concat(t)),openInNewTab1(t)};return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{if(null!==lastMessage){if("string"!=typeof lastMessage.data)return;let n=JSON.parse(lastMessage.data);if("json_response_object_stringified"===n.type){let t=JSON.parse(n.payload);if("license_response"===t.json_type){let n=t.json_object;setLicenseResponseObj(n),setLicenseAssistantText(n.next_question),n.license_terms_explained&&setLicenseAssistantExplainerText(n.license_terms_explained)}else throw Error("Unknown stringified json object type received from the back-end server: ".concat(t.json_type))}else if("text"===n.type){let t=n.payload;setStory(n=>n+t.delta)}else if("state"===n.type){let t=n.payload;setIsStreaming(t.streaming_text),setStateText(t.state_change_message)}else if("image"===n.type){let t=n.payload;t.urls.length>0&&setShowCarousel(!0),setImages(t),setIsStreaming(!1)}else if("share_image_on_twitter"===n.type){let t=n.payload;if(t.url_to_twitter_card.length<1)throw Error("The Twitter card URL is empty.")}else if("twitter_card_details"===n.type){console.info(CONSOLE_CATEGORY,"Received twitter_card_details directive...");let t=n.payload;if(t.client_user_message===_client_constants_client_user_messages__WEBPACK_IMPORTED_MODULE_8__._.TWITTER_SHARE)openTwitterShare(t);else throw Error("Unknown client user message: ".concat(t.client_user_message))}else if("mint_nft_image_details"===n.type)mintNftImageDetailsResolver.current&&(console.info(CONSOLE_CATEGORY,"Image details for NFT minting received.  Releasing pending promise that is waiting on it."),mintNftImageDetailsResolver.current(n.payload),mintNftImageDetailsResolver.current=null);else if("get_user_blockchain_presence_result"===n.type){if(requestGetUserBlockchainPresenceObjectResolver.current){if(console.info(CONSOLE_CATEGORY,"User blockchain presence object received.  Releasing pending promise that is waiting on it."),null===n.payload)requestGetUserBlockchainPresenceObjectResolver.current(null);else{let t=_app_components_blockchain_user_blockchain_presence__WEBPACK_IMPORTED_MODULE_9__.EA.fromJsonString(n.payload);requestGetUserBlockchainPresenceObjectResolver.current(t)}mintNftImageDetailsResolver.current=null}}else if("store_user_blockchain_presence_result"===n.type){if(requestStoreUserBlockchainPresenceObjectResolver.current){console.info(CONSOLE_CATEGORY,"User blockchain presence object store result received.  Releasing pending promise that is waiting on it.");let{result:t}=n.payload;requestStoreUserBlockchainPresenceObjectResolver.current(t),mintNftImageDetailsResolver.current=null}}else if("error"===n.type){var t;let r=n.payload;setIsStreaming(!1),setPrompt(defaultPrompt),setUserHasTyped(!1),setErrorMessage(null!==(t=r.error)&&void 0!==t?t:"An unknown error occurred."),clearError()}else throw Error("Invalid data type: ".concat(n.type))}},[lastMessage,defaultPrompt]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{images.urls.length>0&&imageCarouselRef.current&&imageCarouselRef.current.scrollIntoView({behavior:"smooth",block:"end"})},[images]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex-container flex h-max flex-col items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_components_toolbar_toolbar__WEBPACK_IMPORTED_MODULE_4__.Z,{disabled:!1,onGenreChange:onGenreChange,onGenreSelect:onGenreSelect,doShareImageOnTwitter:doShareImageOnTwitter,doMintTokenOnStoryProtocol:doLicenseAssistantBeforeMinting}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"my-2 flex w-max grid-cols-[1fr_1fr] items-center justify-center gap-2 text-center sm:w-screen",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex w-48",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_themes__WEBPACK_IMPORTED_MODULE_7__.Ct,{color:badgeColor(),children:["SOCKET: ",connectionStatus]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex w-48",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_themes__WEBPACK_IMPORTED_MODULE_7__.Ct,{color:"teal",className:"sm:opacity-0",children:["GENRE: ",genreList[genre]]})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:errorMessage?"opacity-90":"opacity-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_themes__WEBPACK_IMPORTED_MODULE_7__.UW.Root,{size:"1",color:"yellow",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_themes__WEBPACK_IMPORTED_MODULE_7__.UW.Icon,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Frown_lucide_react__WEBPACK_IMPORTED_MODULE_14__.Z,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_themes__WEBPACK_IMPORTED_MODULE_7__.UW.Text,{children:errorMessage})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{id:"state-text",className:"w-[500px] mx-auto text-center px-12 text-justify font-medium text-red-400 animate-pulse-brightness",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"#ffcccc"},children:stateText}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"grid items-center justify-center ".concat(isStreaming?"opacity-90":"opacity-0"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_themes__WEBPACK_IMPORTED_MODULE_7__.$j,{size:"3",className:"mt-3"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-max flex flex-col items-center justify-start",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_components_chatbot_interaction_floating__WEBPACK_IMPORTED_MODULE_11__.Z,{ref:cbLicenseAssistantRef,titleText:"Story Protocol License Assistant",onTakeAction:onLicenseAssistantTakeAction,handleStoryProtocolClick:doMintTokenOnStoryProtocol,stateText:stateText,isStreaming:isStreaming})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"w-max flex flex-col items-center justify-start",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{id:"prompt-input-container-image-assistant",className:"mt-4 pb-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_components_prompt_input__WEBPACK_IMPORTED_MODULE_5__.Z,{onChange:onPromptUpdate,value:prompt,onTakeAction:doMakeImage})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{id:"image-carousel-container",ref:imageCarouselRef,className:"flex h-[320px] items-center justify-center pb-20 mt-4 ".concat(showCarousel?"block":"hidden"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_components_image_viewer__WEBPACK_IMPORTED_MODULE_6__.Z,{imageUrls:images.urls,onActiveImageChange:doActiveImageChange})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{id:"story-text",className:"w-[500px] mx-auto whitespace-pre-wrap px-12 pb-4 pt-4 text-justify font-medium",children:story})]})]})}},9045:function(t,n,r){"use strict";r.d(n,{O:function(){return getDefaultAuthSession}});let getDefaultAuthSession=()=>({user:{name:"discord_man",email:"disman@gmail.com",image:"https://cdn.discordapp.com/avatars/ava1.png",id:"3838292938"}})},5007:function(t,n,r){"use strict";var o;r.d(n,{_:function(){return o}}),function(t){t.TWITTER_SHARE="twitter_share",t.MINT_NFT="mint_nft"}(o||(o={}))},5196:function(t,n,r){"use strict";function showAllBigintFieldNames(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root";if(t&&"object"==typeof t){for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],i="".concat(n,".").concat(r);"bigint"==typeof o?console.log(i):"object"==typeof o&&null!==o&&showAllBigintFieldNames(o,i)}}}r.d(n,{q:function(){return showAllBigintFieldNames}})}}]);